@using ZKEACMS.Product
@using Easy.ViewPort.jsTree
@using ZKEACMS.Product.Models
@{
    Script.Reqiured("jsTree").AtFoot();
    Style.Reqiured("jsTree").AtHead();
    var categoryTree = Html.Tree<ProductCategory>().Source("GetProductCategoryTree", "ProductCategory")
        .On(Events.ActiveNode, "ActiveNode");
}
<div class="row">
    <div class="col-md-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                产品类别
            </div>
            <div class="panel-body">
                @categoryTree
            </div>
            <div class="panel-footer">
                选中产品类别，创建标签
            </div>
        </div>
    </div>
    <div class="col-md-8" id="tags">

    </div>
</div>
<div id="tag-template" class="hidden">
    <ul class="fullRowList widgets">
        <li>
            <div>
                <a href="javascript:"><i class="glyphicon glyphicon-plus"></i></a>
                <a href="javascript:"><i class="glyphicon glyphicon-trash"></i></a>
                <input type="text" value="颜色" />
            </div>
            <ul>
            </ul>
        </li>
    </ul>
</div>

@using (Script.AtFoot())
{
    <script type="text/javascript">
        function ActiveNode(node, selected) {
            $.post("@Url.Action("GetTags")", { ProductCategoryId: selected.node.id }, function (data) {
                $("#tags").html(data);
            }, "html");
        }

        $(document).on("click", ".btn-add-tag", function () {
            $("#category-tags").append($("#tag-template").html());
        });
    </script>
}
